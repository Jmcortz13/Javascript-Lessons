<!DOCTYPE html>
<html>
  <head>
    <title>List Of Products fetch()API</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  </head>
  <body onload="autoNumberRows()">
    <h1 class="text-center">List of Products</h1>
    <div class="container">
      <span class="badge text-bg-info">Total Rows: 13</span>
      <table id="myTable" class="table mt-5 table-bordered ">
        <thead class="table-dark ">
        <tr >
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Price</th>
          <th scope="col">Image</th>
          <th scope="col">Type</th>
        </tr>
      </thead>
        <tbody id="table_body">
          <tr>
            
            <td>Aria</td>
            <td>Celestine</td>
            <td>Cortez</td>
            <td>Pelayo</td>
          </tr>
        </tbody>

      </table>
    </div>
   
    <script>
   function autoNumberRows() {
  var table = document.getElementById("myTable");
  for (var i = 1; i < table.rows.length; i++) {
    var row = table.rows[i];
    var cell = row.insertCell(0);
    cell.textContent = i;
  }
}
  
      fetch("https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json")
        .then((data)=>{
            // console.log(data);
            return data.json(); //converted to object  
        }) 
        .then((objectData)=>{
            console.log(objectData);
            let tableData=""
            objectData.map((values)=> {
              tableData+=`<tr>
            <td>${values.name}</td>
            <td>${values.price}</td>
            <td><img class="img-thumbnail w-25" src="https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/images/${values.image}"/></td>
            <td>${values.type}</td>
          </tr>`;
            });
            document.getElementById("table_body").innerHTML=tableData
        }) 
          .catch((err) =>{
            console.log(err);
          })

    //  const fetchPromise =
    //  fetch('https://mdn.github.io/learning-area/javascript/apis/fetching-data/can-store/products.json');
    //  console.log(fetchPromise);
    //  fetchPromise.then((response) => {
    //     const jsonPromise = response.json();
    //     console.log(jsonPromise);
    //     jsonPromise.then((data) => {
    //       $('#result').text(`Product name: ${data[0].name}`);
    //     }); 
        
    //  });

    </script>
  </body>
</html>
